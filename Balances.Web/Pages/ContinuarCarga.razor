@page "/ContinuarCarga/{balid}"
@using Balances.DTO;
@using Balances.Utilities;
@using Balances.Web.Services.Implementation;
@using Org.BouncyCastle.Asn1.Ocsp;
@using Balances.Web.Services.Contracts
@inject NavigationManager NavigationManager
@inject ICaratulaClientService caratulaService
@inject IBalanceClientService balanceService

@inject ISessionClientService sesionService
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage

<h3>Cargando....</h3>

@code {
    [Parameter]
    public string balid { get; set; }
    [Parameter]
    public string sesionId { get; set; }

    protected  override async void OnInitialized()
    {
        /*cargar la caratula*/

        var sesionRespuesta = await sesionService.getNewSession();

        sesionId = sesionRespuesta.Result;
       

        await sessionStorage.SetItemAsync("SessionId", sesionId);

        //insertamos el balance en una sesion
        
        await sesionService.setBalanceId(sesionId, balid);
      

        NavigationManager.NavigateTo($"Caratula/{balid}");


    }

  

   

}
